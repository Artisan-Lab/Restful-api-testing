## 工作记录


### 11.23

gitlab覆盖率貌似做好了，但是对于同一个API多个分支的覆盖率貌似没做到，更像是API覆盖率，还需要再改改。

遗传算法在刚开始测试时表现并不好，由于采用了贪心的原则，一开始会有更多干扰。但是在多轮测试以后，效果让我有点惊喜，能够通过反馈筛选出较为准确的参数以来

想做动态删减的资源池，但有点不知道怎么改。难点在于要基于什么method建立资源池？基于post的话，数据库里原有的资源在资源池中就无法反馈。
基于get的话，又存在 GET /projects 和 GET /projects/{id} 两种情况。建立的资源池可能不全。
是否可以基于结点建立资源池？但这样必须考虑上下结点的联系，如POST /projects 与 DELETE /projects/{id} 这是父子结点，但两者对同一资源进行操作。

而且不能跟任何一个项目过于耦合，头疼啊


### 11.24

写了一下依赖文件，便于在机器上移植代码，现在基本上换个环境也都能直接执行了，但是redis还是需要另外配，后面如果需要的话再想办法把
redis-server也集成进来

写了一下环境布置，GitLab那个代码覆盖率的精度只有四位数字 （0.00%），所以导致一些小分支的代码覆盖情况变化不会体现出来，那实验环境这块应该没啥问题了

还剩下动态资源池这块，我想了一个办法：既然我现在已经知道了我每次取资源都去哪里取，那么如果我运行delete成功了就把对应的资源删了。但是这样有个问题
就是可能存在多个API的资源池里的资源需要删，那这样删就删不干净了，现有的论文里也没有类似的案例

### 11.25

今天改进了一下资源池，原先的资源池是以响应为单位的，是将整个响应完整的存储下来，形成响应列表，但当长时间测试，响应列表会越来越长。
现在的资源池是以实例为单位


### 11.26

悲伤的一天，覆盖率有个bug，我测gitlab所有api的时候得到这么一个令人悲伤的情况，返工

另外，我发现测的时候，无效请求的比例很高，经过排查，我发现是API文档的原因，当时的文档没有经过人工校验，存在很多问题，我尝试在网上找文档，但是大家都遇到相似的情况，或许我该手工校验所有API？
找到了新加坡南洋理工大学的同行hhh
![image](https://user-images.githubusercontent.com/71680354/143561734-15e27358-e388-44ea-bb74-75f7c09da723.png)

我手工校验过project API 能有25%左右的有效请求比例。而跑所有gitlab的api只有5%的有效请求。
另外，我发现我的方法的一些问题，因为API太多了，有600多个，采用贪心的算法时，有的参数甚至会依赖几百个参数（这就是之前天宇遇到的情况）会有太多的无效依赖。或许我该在参数依赖中也加入树依赖的影响？

最近学校疫情，老师同学也都比较忙，希望大家一切安好！


### 11.30 

覆盖率工具可用，但是在我测试后出现一个问题，相同的path的method共享覆盖率，无语子，而且失败跟成功增加的覆盖率是一样的。
![W%@6AM76CM{~M@4OP_I{AE3](https://user-images.githubusercontent.com/71680354/144161027-bd7f0920-6d0a-4d1c-a99d-c3a32862f0cf.png)

这两天没有更新report，主要是做的不是与代码相关的，我今天跑restler实验，但是出现了一个很奇怪的问题，restler无法访问我的服务，但是我本地可以访问服务，发现有人出现了与我共同的问题但没有解决不知道是不是restler的bug。每次看restler代码的issue，都会想，什么时候我们的工具也能有这么多人用然后大家一起交流。

另外今天做了一下华为的Monthly report


### 12.1

十二月，新的一个月，这个月无论如何要把论文完成。进度太慢，晚上睡觉中途都得醒好几次，不能再拖了。

之前我的问题，在服务规模足够庞大时，如完整的gitlab API有600多个，这种情况下，参数依赖会非常复杂。我突然意识到，restler也存在这个问题，我原本想的是跟restler论文里写的一样，
将服务拆开来测，但是，树状结构不就是为了应对这个问题的么。restler做不了，我们能做。没有API的官方文档，我就人工手写一份，无论如何都要弄好。

要不要以method来区别测试用例的生成呢？GET、DELETE、PUT、PATCH是幂等的，POST不是幂等的，这两者要做个区分吧，或者说对五种请求都分别设计？
比如：GET参数相同的话不管发送对服务端都不应该有修改，返回的值也都相同，可以对此进行验证？